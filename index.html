<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modern Quotation Maker</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto+Slab:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: #f9fbfd;
      color: #333;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    h1 {
      font-weight: 700;
      color: #1a3a6c;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      padding: 25px;
      margin-bottom: 25px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #2d3748;
    }

    input, textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #cbd5e0;
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
    }

    .items-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
    }

    .items-table th,
    .items-table td {
      padding: 12px 10px;
      text-align: left;
      border-bottom: 1px solid #edf2f7;
    }

    .items-table th {
      font-weight: 600;
      color: #2d3748;
      background: #f8fafc;
    }

    .btn {
      padding: 10px 18px;
      background: #3182ce;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 500;
      margin-right: 10px;
      transition: all 0.2s;
    }

    .btn:hover {
      background: #2c5282;
    }

    .btn-danger {
      background: #e53e3e;
    }

    .btn-danger:hover {
      background: #c53030;
    }

    .btn-print {
      background: #38a169;
    }

    .btn-print:hover {
      background: #2f855a;
    }

    /* =============== PRINT QUOTATION STYLING =============== */
    .quotation-output {
      display: none;
      font-family: 'Roboto Slab', serif;
      background: white;
      padding: 40px;
      border-radius: 8px;
    }

    .quotation-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .company-name {
      font-size: 28px;
      font-weight: 700;
      color: #1a202c;
      margin-bottom: 6px;
    }

    .company-address {
      font-size: 14px;
      color: #4a5568;
      line-height: 1.5;
    }

    .quotation-title {
      font-size: 24px;
      font-weight: 700;
      margin: 20px 0;
      color: #2d3748;
      text-decoration: underline;
      text-underline-offset: 6px;
    }

    .quotation-meta {
      display: flex;
      justify-content: space-between;
      margin-bottom: 25px;
      font-size: 15px;
    }

    .to-section {
      margin-bottom: 25px;
    }

    .to-section p {
      margin: 4px 0;
    }

    .quotation-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0 25px;
    }

    .quotation-table th,
    .quotation-table td {
      padding: 12px 10px;
      text-align: left;
      border: 1px solid #cbd5e0;
    }

    .quotation-table th {
      background-color: #f7fafc;
      font-weight: 600;
      color: #2d3748;
    }

    .totals-section {
      text-align: right;
      margin-bottom: 25px;
    }

    .total-row {
      display: flex;
      justify-content: flex-end;
      margin: 6px 0;
    }

    .total-label {
      width: 180px;
      font-weight: 600;
      color: #2d3748;
    }

    .total-value {
      width: 120px;
      text-align: right;
      font-family: 'Poppins', sans-serif;
    }

    .grand-total-row {
      font-size: 18px;
      font-weight: 700;
      color: #1a3a6c;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 2px solid #cbd5e0;
    }

    .amount-words-box {
      background: #f8fafc;
      padding: 14px;
      border-left: 4px solid #3182ce;
      margin: 20px 0;
      font-size: 15px;
      font-family: 'Poppins', sans-serif;
    }

    .terms {
      margin-top: 25px;
      font-size: 14px;
      line-height: 1.7;
    }

    .signature {
      margin-top: 40px;
      text-align: right;
      font-style: italic;
      color: #4a5568;
    }

    /* =============== PRINT MEDIA =============== */
    @media print {
      body {
        background: white;
        padding: 0;
      }

      .container, .card {
        box-shadow: none !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      .quotation-output {
        padding: 30px !important;
        display: block !important;
        box-shadow: none !important;
      }

      .btn {
        display: none !important;
      }

      body * {
        visibility: hidden;
      }

      .quotation-output,
      .quotation-output * {
        visibility: visible;
      }

      .quotation-output {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Modern Quotation Maker</h1>
      <p>Create & print professional quotations instantly</p>
    </header>

    <!-- Input Form -->
    <div class="card" id="inputForm">
      <h2>Quotation Details</h2>

      <div class="form-group">
        <label>Quotation No.</label>
        <input type="text" id="quoteNo" value="001" />
      </div>

      <div class="form-group">
        <label>Date</label>
        <input type="date" id="quoteDate" />
      </div>

      <div class="form-group">
        <label>To (Client Name)</label>
        <input type="text" id="clientName" placeholder="e.g., PRAVAH" />
      </div>

      <div class="form-group">
        <label>Client Address</label>
        <textarea id="clientAddress" placeholder="Deoghar, Jharkhand"></textarea>
      </div>

      <div class="form-group">
        <label>Client GSTIN</label>
        <input type="text" id="clientGstin" placeholder="20AAAAP0521E1ZJ" />
      </div>

      <h3>Line Items</h3>
      <table class="items-table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Qty</th>
            <th>Rate (‚Çπ)</th>
            <th>Amount (‚Çπ)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="itemsBody">
          <tr>
            <td><input type="text" class="desc" placeholder="Grill Installation Work" /></td>
            <td><input type="number" class="qty" value="400" min="0" step="1" /></td>
            <td><input type="number" class="rate" value="120" min="0" step="0.01" /></td>
            <td class="amount">48,000</td>
            <td><button class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
          </tr>
        </tbody>
      </table>

      <button class="btn" onclick="addRow()">+ Add Item</button>
      <button class="btn btn-print" onclick="generateQuotation()" style="margin-top:15px;">Generate Quotation</button>
    </div>

    <!-- Output Quotation (Print View) -->
    <div class="card quotation-output" id="quotationOutput">
      <!-- Company Info -->
      <div class="quotation-header">
        <div class="company-name">DURGA ENGINEERING WORKS</div>
        <div class="company-address">
          Noor Sarai, Nalanda, Bihar<br>
          GSTIN: 10AHCPK1560G1Z1 | Contact: 9XXXXXXXXX
        </div>
        <div class="quotation-title">QUOTATION</div>
        <div class="quotation-meta">
          <span>Quotation No: <strong id="outQuoteNo">001</strong></span>
          <span>Date: <strong id="outDate">09-Oct-2025</strong></span>
        </div>
      </div>

      <!-- Client Info -->
      <div class="to-section">
        <p><strong>To,</strong></p>
        <p id="outClientName">PRAVAH</p>
        <p id="outClientAddress">Deoghar, Jharkhand</p>
        <p>GSTIN: <span id="outClientGstin">20AAAAP0521E1ZJ</span></p>
      </div>

      <!-- Items Table -->
      <table class="quotation-table">
        <thead>
          <tr>
            <th>Sl.</th>
            <th>Description of Work</th>
            <th>Qty</th>
            <th>Rate (‚Çπ)</th>
            <th>Amount (‚Çπ)</th>
          </tr>
        </thead>
        <tbody id="outItemsBody">
          <!-- Filled by JS -->
        </tbody>
      </table>

      <!-- Totals -->
      <div class="totals-section">
        <div class="total-row">
          <div class="total-label">Subtotal:</div>
          <div class="total-value" id="outSubtotal">57,200.00</div>
        </div>
        <div class="total-row">
          <div class="total-label">GST @18%:</div>
          <div class="total-value" id="outGst">10,296.00</div>
        </div>
        <div class="total-row grand-total-row">
          <div class="total-label">Grand Total:</div>
          <div class="total-value" id="outGrandTotal">‚Çπ67,496.00</div>
        </div>
      </div>

      <!-- Amount in Words -->
      <div class="amount-words-box">
        <strong>Amount in Words:</strong> <span id="outAmountWords">Sixty Seven Thousand Four Hundred Ninety Six Only</span>
      </div>

      <!-- Terms -->
      <div class="terms">
        <p><strong>Terms & Conditions:</strong></p>
        <ol>
          <li>Quotation valid for 30 days from the date of issue.</li>
          <li>Payment to be made within 7 days from the date of delivery/completion.</li>
          <li>Any additional work or modifications will be billed separately.</li>
        </ol>
      </div>

      <!-- Signature -->
      <div class="signature">
        <p>Authorised Signatory</p>
        <p>(Sign & Stamp)</p>
      </div>

      <button class="btn btn-print" onclick="window.print()" style="margin-top:20px; width: auto;">üñ®Ô∏è Print Quotation</button>
    </div>
  </div>

  <script>
    // Set today as default
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('quoteDate').value = today;

    function addRow() {
      const tbody = document.getElementById('itemsBody');
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><input type="text" class="desc" placeholder="Description of work" /></td>
        <td><input type="number" class="qty" value="1" min="0" step="1" /></td>
        <td><input type="number" class="rate" value="0" min="0" step="0.01" /></td>
        <td class="amount">0.00</td>
        <td><button class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
      `;
      tbody.appendChild(row);
      attachInputListeners(row);
    }

    function removeRow(btn) {
      btn.closest('tr').remove();
    }

    function attachInputListeners(row) {
      const qty = row.querySelector('.qty');
      const rate = row.querySelector('.rate');
      const amountEl = row.querySelector('.amount');

      const update = () => {
        const q = parseFloat(qty.value) || 0;
        const r = parseFloat(rate.value) || 0;
        const amt = q * r;
        amountEl.textContent = new Intl.NumberFormat('en-IN', {
          minimumFractionDigits: 2,
          maximumFractionDigits: 2
        }).format(amt);
      };

      qty.addEventListener('input', update);
      rate.addEventListener('input', update);
      update();
    }

    document.querySelectorAll('#itemsBody tr').forEach(attachInputListeners);

    function numberToWords(num) {
      if (num === 0) return "Zero";
      const belowTwenty = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
        "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
      const tens = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];

      function convert(n) {
        if (n < 20) return belowTwenty[n];
        if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 ? " " + belowTwenty[n % 10] : "");
        if (n < 1000) return belowTwenty[Math.floor(n / 100)] + " Hundred" + (n % 100 ? " " + convert(n % 100) : "");
        if (n < 100000) return convert(Math.floor(n / 1000)) + " Thousand" + (n % 1000 ? " " + convert(n % 1000) : "");
        if (n < 10000000) return convert(Math.floor(n / 100000)) + " Lakh" + (n % 100000 ? " " + convert(n % 100000) : "");
        return convert(Math.floor(n / 10000000)) + " Crore" + (n % 10000000 ? " " + convert(n % 10000000) : "");
      }

      return convert(num) + " Only";
    }

    function generateQuotation() {
      // Get form values
      const quoteNo = document.getElementById('quoteNo').value || '001';
      const quoteDate = document.getElementById('quoteDate').value;
      const clientName = document.getElementById('clientName').value || 'Client Name';
      const clientAddress = document.getElementById('clientAddress').value || 'Address';
      const clientGstin = document.getElementById('clientGstin').value || 'GSTIN';

      // Format date for display (e.g., 09-Oct-2025)
      const d = new Date(quoteDate);
      const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      const formattedDate = `${String(d.getDate()).padStart(2, '0')}-${months[d.getMonth()]}-${d.getFullYear()}`;

      // Update output header
      document.getElementById('outQuoteNo').textContent = quoteNo;
      document.getElementById('outDate').textContent = formattedDate;
      document.getElementById('outClientName').textContent = clientName;
      document.getElementById('outClientAddress').textContent = clientAddress;
      document.getElementById('outClientGstin').textContent = clientGstin;

      // Process line items
      const rows = document.querySelectorAll('#itemsBody tr');
      const outBody = document.getElementById('outItemsBody');
      outBody.innerHTML = '';

      let subtotal = 0;
      rows.forEach((row, i) => {
        const desc = row.querySelector('.desc').value || 'N/A';
        const qty = parseFloat(row.querySelector('.qty').value) || 0;
        const rate = parseFloat(row.querySelector('.rate').value) || 0;
        const amount = qty * rate;
        subtotal += amount;

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td>${desc}</td>
          <td>${qty}</td>
          <td>${rate.toFixed(2)}</td>
          <td>${new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2 }).format(amount)}</td>
        `;
        outBody.appendChild(tr);
      });

      const gst = subtotal * 0.18;
      const grandTotal = subtotal + gst;

      // Format numbers
      const formatter = new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2 });
      document.getElementById('outSubtotal').textContent = formatter.format(subtotal);
      document.getElementById('outGst').textContent = formatter.format(gst);
      document.getElementById('outGrandTotal').textContent = '‚Çπ' + formatter.format(grandTotal);

      // Amount in words (only whole number)
      const words = numberToWords(Math.floor(grandTotal));
      document.getElementById('outAmountWords').textContent = words;

      // Show output
      document.getElementById('quotationOutput').style.display = 'block';
    }
  </script>
</body>
</html>
